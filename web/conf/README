
To Start IBE on bacchus:5000:

    ./apachectl.sh stop                                && \
    ./configure.py --load=instances/bacchus_5000.json  && \
    ./apachectl.sh start                               


A generalized version of this sequence exists in 

    .../ibe/web/conf/re_ibe

which does a few sanity checks before doing anything


Use "re_ibe help" for assistance:

        $ re_ibe help

         *  [re-] start IBE
  
          usage:
          
          re_ibe [[instances/]sysname_portnum[.json]]
          
              (e.g.)
          
              cd    .../ibe/web/conf
              re_ibe bacchus_5000
          
          currently available instances:
          
              bacchus_5000
              bacchus_5001
              bacchus_5002
              bacchus_test_5001
              ceres_8000
              hades_8000
              irsasearchops1_8000
              lcodev1_8000
              lcoops1_8000
              zeus_8000


The script expects to be in an IBE directory, 
which should have a path ending ~ 

    .../*ibe*/web/conf







Here is a current bacchus:5000 IBE startup transcript:




    modell@bacchus$ su - irsadmin
    Password:

    -bash-3.2$ . ~/cm/ibe_dev.bash
    Setting up environment ...
     CM_ENV_DIR: /irsa/cm/env_1.8_mnt
    ORACLE_HOME: /opt/oraclient/oracle/product/10.2.0
        Warning: MySQL unavailable

    -bash-3.2$ cd /local/ibe_dev/web/conf

    -bash-3.2$ ls -la
    total 88
    drwxr-xr-x 3 irsadmin irsa  4096 May 17 09:48 .
    drwxr-xr-x 7 irsadmin irsa  4096 Mar  7 13:56 ..
    -rwxr-xr-x 1 irsadmin irsa  1920 May 17 09:48 apachectl.sh
    -r--r--r-- 1 irsadmin irsa  2350 Jan 21 12:07 apachectl.sh.mako
    -rwxr-xr-x 1 irsadmin irsa  1920 May  3 11:08 .apachectl.sh.prev
    -r-xr-xr-x 1 irsadmin irsa 16080 Mar  7 13:56 configure.py
    -rw-r--r-- 1 irsadmin irsa 12346 May 17 09:48 httpd.conf
    -r--r--r-- 1 irsadmin irsa  6667 Mar  7 13:56 httpd.conf.mako
    -rw-rw-r-- 1 irsadmin irsa 12346 May  3 11:08 .httpd.conf.prev
    drwxr-xr-x 2 irsadmin irsa  4096 Mar 22 17:09 instances
    -r--r--r-- 1 irsadmin irsa  1980 Jan 21 12:07 production.ini.mako
    -rwxrwxrwx 1 irsadmin irsa  1913 Apr 17 10:53 re_ibe


    -bash-3.2$ ./re_ibe

    BEGIN

    Apache stopped

    Loading config from instances/bacchus_5000.json


    Configuring ...
            - symlinking /local/ibe_dev/web/html/ibe/data
                to ../data
            - symlinking /local/ibe_dev/web/html/ibe/docs
                to ../docs

    Deploying dataset twomass/mosaic ...
            - creating directory /local/ibe_dev/web/html/.data.next/twomass/mosaic
            - symlinking /local/ibe_dev/web/html/.data.next/twomass/mosaic/sixdeg
                to /stage/irsa-data-2mass-mosaic/links/mosaic/sixdeg
            - creating directory /local/ibe_dev/web/html/.docs.next/twomass/mosaic/sixdeg
            - copying /local/ibe_dev/conf/catalogs/twomass/mosaic/sixdeg.html
                to /local/ibe_dev/web/html/.docs.next/twomass/mosaic/sixdeg/index.html

    Deploying dataset wise/merge ...
            - creating directory /local/ibe_dev/web/html/.data.next/wise/merge
            - symlinking /local/ibe_dev/web/html/.data.next/wise/merge/merge_p1bm_frm
                to /stage/irsa-wise-links-public/links-allsky/l1b-merge
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/merge/merge_p1bm_frm
            - copying /local/ibe_dev/conf/catalogs/wise/merge/merge_p1bm_frm.html
                to /local/ibe_dev/web/html/.docs.next/wise/merge/merge_p1bm_frm/index.html
            - symlinking /local/ibe_dev/web/html/.data.next/wise/merge/merge_p3am_cdd
                to /stage/irsa-wise-links-public/links-allsky/l3a-merge
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/merge/merge_p3am_cdd
            - copying /local/ibe_dev/conf/catalogs/wise/merge/merge_p3am_cdd.html
                to /local/ibe_dev/web/html/.docs.next/wise/merge/merge_p3am_cdd/index.html

    Deploying dataset wise/allsky ...
            - creating directory /local/ibe_dev/web/html/.data.next/wise/allsky
            - symlinking /local/ibe_dev/web/html/.data.next/wise/allsky/4band_p1bm_frm
                to /stage/irsa-wise-links-public/links-allsky/l1b-4band
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/allsky/4band_p1bm_frm
            - copying /local/ibe_dev/conf/catalogs/wise/allsky/4band_p1bm_frm.html
                to /local/ibe_dev/web/html/.docs.next/wise/allsky/4band_p1bm_frm/index.html
            - symlinking /local/ibe_dev/web/html/.data.next/wise/allsky/4band_p3am_cdd
                to /stage/irsa-wise-links-public/links-allsky/l3a-4band
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/allsky/4band_p3am_cdd
            - copying /local/ibe_dev/conf/catalogs/wise/allsky/4band_p3am_cdd.html
                to /local/ibe_dev/web/html/.docs.next/wise/allsky/4band_p3am_cdd/index.html

    Deploying dataset wise/cryo_3band ...
            - creating directory /local/ibe_dev/web/html/.data.next/wise/cryo_3band
            - symlinking /local/ibe_dev/web/html/.data.next/wise/cryo_3band/3band_p1bm_frm
                to /stage/irsa-wise-links-public/links-3band/l1b-3band
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/cryo_3band/3band_p1bm_frm
            - copying /local/ibe_dev/conf/catalogs/wise/cryo_3band/3band_p1bm_frm.html
                to /local/ibe_dev/web/html/.docs.next/wise/cryo_3band/3band_p1bm_frm/index.html
            - symlinking /local/ibe_dev/web/html/.data.next/wise/cryo_3band/3band_p3am_cdd
                to /stage/irsa-wise-links-public/links-3band/l3a-3band
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/cryo_3band/3band_p3am_cdd
            - copying /local/ibe_dev/conf/catalogs/wise/cryo_3band/3band_p3am_cdd.html
                to /local/ibe_dev/web/html/.docs.next/wise/cryo_3band/3band_p3am_cdd/index.html

    Deploying dataset wise/postcryo ...
            - creating directory /local/ibe_dev/web/html/.data.next/wise/postcryo
            - symlinking /local/ibe_dev/web/html/.data.next/wise/postcryo/2band_p1bm_frm
                to /stage/irsa-wise-links-public/links-postcryo/l1b-2band
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/postcryo/2band_p1bm_frm
            - copying /local/ibe_dev/conf/catalogs/wise/postcryo/2band_p1bm_frm.html
                to /local/ibe_dev/web/html/.docs.next/wise/postcryo/2band_p1bm_frm/index.html

    Deploying dataset wise/prelim_postcryo ...
            - creating directory /local/ibe_dev/web/html/.data.next/wise/prelim_postcryo
            - symlinking /local/ibe_dev/web/html/.data.next/wise/prelim_postcryo/p1bm_frm
                to /stage/irsa-wise-links-public/links-prelim-postcryo/l1b-2band
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/prelim_postcryo/p1bm_frm
            - copying /local/ibe_dev/conf/catalogs/wise/prelim_postcryo/p1bm_frm.html
                to /local/ibe_dev/web/html/.docs.next/wise/prelim_postcryo/p1bm_frm/index.html

    Deploying dataset wise/prelim ...
            - creating directory /local/ibe_dev/web/html/.data.next/wise/prelim
            - symlinking /local/ibe_dev/web/html/.data.next/wise/prelim/p1bm_frm
                to /stage/irsa-wise-links-public/links-prelim/l1b
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/prelim/p1bm_frm
            - copying /local/ibe_dev/conf/catalogs/wise/prelim/p1bm_frm.html
                to /local/ibe_dev/web/html/.docs.next/wise/prelim/p1bm_frm/index.html
            - symlinking /local/ibe_dev/web/html/.data.next/wise/prelim/p3am_cdd
                to /stage/irsa-wise-links-public/links-prelim/l3a
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/prelim/p3am_cdd
            - copying /local/ibe_dev/conf/catalogs/wise/prelim/p3am_cdd.html
                to /local/ibe_dev/web/html/.docs.next/wise/prelim/p3am_cdd/index.html

    Deploying dataset wise/pass2 ...
            - creating directory /local/ibe_dev/web/html/.data.next/wise/pass2
            - symlinking /local/ibe_dev/web/html/.data.next/wise/pass2/4band_i1bm_frm
                to /stage/irsa-wise-links-ops/links-pass2/l1b-4band
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/pass2/4band_i1bm_frm
            - copying /local/ibe_dev/conf/catalogs/wise/pass2/4band_i1bm_frm.html
                to /local/ibe_dev/web/html/.docs.next/wise/pass2/4band_i1bm_frm/index.html
            - symlinking /local/ibe_dev/web/html/.data.next/wise/pass2/3band_i1bm_frm
                to /stage/irsa-wise-links-ops/links-pass2/l1b-3band
            - symlinking /local/ibe_dev/web/html/.data.next/wise/pass2/4band_i3am_cdd
                to /stage/irsa-wise-links-ops/links-pass2/l3a-4band
            - symlinking /local/ibe_dev/web/html/.data.next/wise/pass2/3band_i3am_cdd
                to /stage/irsa-wise-links-ops/links-pass2/l3a-3band
            - symlinking /local/ibe_dev/web/html/.data.next/wise/pass2/2band_i1bm_frm
                to /stage/irsa-wise-links-ops/links-pass2/l1b-2band

    Deploying dataset wise/pass1 ...
            - creating directory /local/ibe_dev/web/html/.data.next/wise/pass1
            - symlinking /local/ibe_dev/web/html/.data.next/wise/pass1/i1bm_frm
                to /stage/irsa-wise-links-ops/links-pass1/l1b
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/pass1/i1bm_frm
            - copying /local/ibe_dev/conf/catalogs/wise/pass1/i1bm_frm.html
                to /local/ibe_dev/web/html/.docs.next/wise/pass1/i1bm_frm/index.html
            - symlinking /local/ibe_dev/web/html/.data.next/wise/pass1/i3om_cdd
                to /stage/irsa-wise-links-ops/links-pass1/l3o
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/pass1/i3om_cdd
            - copying /local/ibe_dev/conf/catalogs/wise/pass1/i3om_cdd.html
                to /local/ibe_dev/web/html/.docs.next/wise/pass1/i3om_cdd/index.html
            - symlinking /local/ibe_dev/web/html/.data.next/wise/pass1/i3am_cdd
                to /stage/irsa-wise-links-ops/links-pass1/l3a
            - creating directory /local/ibe_dev/web/html/.docs.next/wise/pass1/i3am_cdd
            - copying /local/ibe_dev/conf/catalogs/wise/pass1/i3am_cdd.html
                to /local/ibe_dev/web/html/.docs.next/wise/pass1/i3am_cdd/index.html

    Deploying dataset ptf/dev ...
            - creating directory /local/ibe_dev/web/html/.data.next/ptf/dev
            - symlinking /local/ibe_dev/web/html/.data.next/ptf/dev/process
                to /stage/irsa-ptf-links/

    Deploying dataset lsst/summer2012 ...
            - creating directory /local/ibe_dev/web/html/.data.next/lsst/summer2012
            - symlinking /local/ibe_dev/web/html/.data.next/lsst/summer2012/good_seeing_coadd
                to /irsadata/LSST/dr-s2012/sdss/coadd/rr1000/s4S
            - writing /local/ibe_dev/web/conf/.apachectl.sh.next
            - writing /local/ibe_dev/web/conf/.httpd.conf.next
            - writing /local/ibe_dev/src/python/.production.ini.next
            - removing /local/ibe_dev/web/conf/.mako

    Swapping in new config ...
            - removing /local/ibe_dev/web/html/.docs.prev
            - moving /local/ibe_dev/web/html/docs
                to /local/ibe_dev/web/html/.docs.prev
              and /local/ibe_dev/web/html/.docs.next
                to /local/ibe_dev/web/html/docs
            - removing /local/ibe_dev/web/html/.data.prev
            - moving /local/ibe_dev/web/html/data
                to /local/ibe_dev/web/html/.data.prev
              and /local/ibe_dev/web/html/.data.next
                to /local/ibe_dev/web/html/data
            - moving /local/ibe_dev/web/conf/apachectl.sh
                to /local/ibe_dev/web/conf/.apachectl.sh.prev
            - moving /local/ibe_dev/web/conf/.apachectl.sh.next
                to /local/ibe_dev/web/conf/apachectl.sh
            - moving /local/ibe_dev/web/conf/httpd.conf
                to /local/ibe_dev/web/conf/.httpd.conf.prev
            - moving /local/ibe_dev/web/conf/.httpd.conf.next
                to /local/ibe_dev/web/conf/httpd.conf
            - moving /local/ibe_dev/src/python/production.ini
                to /local/ibe_dev/src/python/.production.ini.prev
            - moving /local/ibe_dev/src/python/.production.ini.next
                to /local/ibe_dev/src/python/production.ini
            - moving /local/ibe_dev/conf/engines.xml
                to /local/ibe_dev/conf/.engines.xml.prev
            - moving /local/ibe_dev/conf/.engines.xml.next
                to /local/ibe_dev/conf/engines.xml
    configure[.py]'d
      pause for httpd stop...
    Apache restarted

    DONE


    -bash-3.2$ logout











NOTES:

# critical step when starting from clean install
# build apachectl.sh from apachectl.sh.mako
configure.py --load=instances/bacchus_5001.json

# after making a change to a running system
apachectl.sh stop
configure.py --load=instances/bacchus_5001.json
apachectl.sh start










Mark O'Dell
626-395-1819
modell@ipac.caltech.edu

