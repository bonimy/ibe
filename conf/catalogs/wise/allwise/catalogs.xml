<?xml version="1.0" encoding="UTF-8"?>

<!--    ____________________________________________________
      /                                                      \
     |   WISE AllWISE Tables                            | -->
<catalogs>

<schema_group id="wise">

<schema name="allwise" engine="wise_allwise">

  <description>WISE AllWISE Tables</description>

<!--  AllWISE  -->

 <!-- WISE AllWISE Atlas (L3a) Images -->

  <table name="p3am_cdd" dbname="allwise_p3am_cdd">

    <description>WISE AllWISE Atlas (L3a) Images</description>

    <chunk_index path="/stage/irsa-wise-xpf-public/chunk_index/wise_allwise/allwise_p3am_cdd/index.ci" />

    <corners radius="1.5"/>
    <center ra="crval1" dec="crval2"/>

    <unique refs="cntr"                   />  
    <unique refs="coadd_id band" />

    <image_set refs="coadd_id"            />  

    <reference from="coadd_id" to="wise.cryo_3band.3band_p3as_psd.coadd_id" />

    <sia writer="ibe.lib.sia.WiseSiaWriter" />
  
    <products rootpath="/stage/irsa-wise-links-public/links-allwise/l3a" />


    <column name="band" principal="true">
      <description>WISE band number (1-4)</description>
      <ucd>instr.filter</ucd>
      <datatype>SMALLINT</datatype>
      <format_spec>1d</format_spec>
    </column>

    <column name="naxis">
      <description>number of data axes</description>
      <ucd>pos.wcs.naxes</ucd>
      <utype>fits:NAXIS;stc:PixelCoordSystem.PixelCoordFrame.CoordFlavor.coord_naxes</utype>
      <datatype>SMALLINT</datatype>
      <format_spec>1d</format_spec>
    </column>

    <column name="naxis1">
      <description>number of pixels in x (data axis 1)</description>
      <utype>fits:NAXIS1;stc:PixelCoordArea.PixelCoord2VecInterval.HiLimit2Vec.C1</utype>
      <datatype>SMALLINT</datatype>
      <format_spec>4d</format_spec>
    </column>

    <column name="naxis2">
      <description>number of pixels in y (data axis 2)</description>
      <utype>fits:NAXIS2;stc:PixelCoordArea.PixelCoord2VecInterval.HiLimit2Vec.C2</utype>
      <datatype>SMALLINT</datatype>
      <format_spec>4d</format_spec>
    </column>

    <column name="wrelease">
      <description>release version of WSDS pipeline</description>
      <ucd>meta.version</ucd>
      <datatype>CHAR(20)</datatype>
    </column>

    <column name="crpix1">
      <description>reference pixel value for axis 1 (x)</description>
      <utype>fits:CRPIX1;stc:PixelCoordSystem.PixelCoordFrame.ReferencePixel.Pixel2d.Value2.C1</utype>
      <unit>pix</unit>
      <datatype>DECIMAL(8,1)</datatype>
    </column>

    <column name="crpix2">
      <description>reference pixel value for axis 2 (y)</description>
      <utype>fits:CRPIX2;stc:PixelCoordSystem.PixelCoordFrame.ReferencePixel.Pixel2d.Value2.C2</utype>
      <unit>pix</unit>
      <datatype>DECIMAL(8,1)</datatype>
    </column>

    <column name="crval1" principal="true">
      <description>reference position RA (FK5 J2000) at crpix1,crpix2</description>
      <ucd>pos.eq.ra</ucd>
      <utype>fits:CRVAL1;stc:PixelCoordSystem.PixelCoordFrame.CoordRefPos.Vector2DCoordinate.Value2.C1</utype>
      <unit>deg</unit>
      <datatype>DECIMAL(15,12)</datatype>
    </column>

    <column name="crval2" principal="true">
      <description>reference position Dec (FK5 J2000) at crpix1,crpix2</description>
      <ucd>pos.eq.dec</ucd>
      <utype>fits:CRVAL2;stc:PixelCoordSystem.PixelCoordFrame.CoordRefPos.Vector2DCoordinate.Value2.C2</utype>
      <unit>deg</unit>
      <datatype>DECIMAL(14,12)</datatype>
    </column>

    <column name="ctype1">
      <description>projection type (with distortion) for axis 1 (x)</description>
      <utype>fits:CTYPE1</utype>
      <datatype>CHAR(13)</datatype>
    </column>

    <column name="ctype2">
      <description>projection type (with distortion) for axis 2 (y)</description>
      <utype>fits:CTYPE2</utype>
      <datatype>CHAR(13)</datatype>
    </column>

    <column name="equinox">
      <description>equinox of WCS information</description>
      <ucd>time.equinox</ucd>
      <utype>fits:EQUINOX</utype>
      <unit>yr</unit>
      <datatype>DECIMAL(5,1)</datatype>
    </column>

    <column name="bunit">
      <description>image data unit</description>
      <datatype>CHAR(20)</datatype>
    </column>

    <column name="elon">
      <description>ecliptic longitude of crpix1,crpix2</description>
      <ucd>pos.ecliptic.lon</ucd>
      <utype>stc:AstroCoords.Position2D.Value2.C1</utype>
      <unit>deg</unit>
      <datatype>DECIMAL(15,12)</datatype>
    </column>

    <column name="elat">
      <description>ecliptic latitude of crpix1,crpix2</description>
      <ucd>pos.ecliptic.lat</ucd>
      <utype>stc:AstroCoords.Position2D.Value2.C2</utype>
      <unit>deg</unit>
      <datatype>DECIMAL(14,12)</datatype>
    </column>

    <column name="glon">
      <description>galactic longitude of crpix1,crpix2</description>
      <ucd>pos.galactic.lon</ucd>
      <utype>stc:AstroCoords.Position2D.Value2.C1</utype>
      <unit>deg</unit>
      <datatype>DECIMAL(15,12)</datatype>
    </column>

    <column name="glat">
      <description>galactic latitude of crval1,crval2</description>
      <ucd>pos.galactic.lat</ucd>
      <utype>stc:AstroCoords.Position2D.Value2.C2</utype>
      <unit>deg</unit>
      <datatype>DECIMAL(14,12)</datatype>
    </column>

    <column name="ra1" principal="true">
      <description>RA (FK5 J2000) of corner #1 (crpix1,crpix2=-.5,-.5)</description>
      <ucd>pos.eq.ra</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(15,12)</datatype>
    </column>

    <column name="dec1" principal="true">
      <description>Dec (FK5 J2000) of corner #1 (crpix1,crpix2=-.5,-.5)</description>
      <ucd>pos.eq.dec</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(14,12)</datatype>
    </column>

    <column name="ra2" principal="true">
      <description>RA (FK5 J2000) of corner #2 (crpix1,crpix2=naxis1+.5,-.5)</description>
      <ucd>pos.eq.ra</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(15,12)</datatype>
    </column>

    <column name="dec2" principal="true">
      <description>Dec (FK5 J2000) of corner #2 (crpix1,crpix2=naxis1+.5,-.5)</description>
      <ucd>pos.eq.dec</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(14,12)</datatype>
    </column>

    <column name="ra3" principal="true">
      <description>RA (FK5 J2000) of corner #3 (crpix1,crpix2=naxis1+.5,naxis2+.5)</description>
      <ucd>pos.eq.ra</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(15,12)</datatype>
    </column>

    <column name="dec3" principal="true">
      <description>Dec (FK5 J2000) of corner #3 (crpix1,crpix2=naxis1+.5,naxis2+.5)</description>
      <ucd>pos.eq.dec</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(14,12)</datatype>
    </column>

    <column name="ra4" principal="true">
      <description>RA (FK5 J2000) of corner #4 (crpix1,crpix2=-.5,naxis2+.5)</description>
      <ucd>pos.eq.ra</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(15,12)</datatype>
    </column>

    <column name="dec4" principal="true">
      <description>Dec (FK5 J2000) of corner #4 (crpix1,crpix2=-.5,naxis2+.5)</description>
      <ucd>pos.eq.dec</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(14,12)</datatype>
    </column>

    <column name="magzp" principal="true">
      <description>relative photometric zero-point mag</description>
      <unit>mag</unit>
      <datatype>DECIMAL(7,5)</datatype>
    </column>

    <column name="magzpunc" principal="true">
      <description>1-sigma uncertainty in photometric zero-point mag</description>
      <unit>mag</unit>
      <datatype>DECIMAL(7,6)</datatype>
    </column>

    <column name="coadd_id" principal="true">
      <description>coadd ID</description>
      <ucd>meta.id</ucd>
      <datatype>CHAR(20)</datatype>
    </column>

    <column name="fcdate">
      <description>date and time of file creation, UTC</description>
      <ucd>time.epoch</ucd>
      <datatype>CHAR(20)</datatype>
    </column>

    <column name="date_obs1" principal="true">
      <description>date and time of observation of earliest frame in coadd, UTC</description>
      <ucd>time.epoch</ucd>
      <datatype>CHAR(24)</datatype>
    </column>

    <column name="mid_obs" principal="true">
      <description>date and time of observation of middle frame in coadd, UTC</description>
      <ucd>time.epoch</ucd>
      <datatype>CHAR(24)</datatype>
    </column>

    <column name="date_obs2" principal="true">
      <description>date and time of observation of latest frame in coadd, UTC</description>
      <ucd>time.epoch</ucd>
      <datatype>CHAR(24)</datatype>
    </column>

    <column name="sizex">
      <description>linear dimension of coadd along axis 1 (x)</description>
      <unit>deg</unit>
      <datatype>DECIMAL(8,6)</datatype>
    </column>

    <column name="sizey">
      <description>linear dimension of coadd along axis 2 (y)</description>
      <unit>deg</unit>
      <datatype>DECIMAL(8,6)</datatype>
    </column>

    <column name="pxscal1">
      <description>arcsec/pix scale at crpix1,crpix2 for axis 1 (x)</description>
      <unit>arcsec/pix</unit>
      <datatype>DECIMAL(8,6)</datatype>
    </column>

    <column name="pxscal2">
      <description>arcsec/pix scale at crpix1,crpix2 for axis 2 (y)</description>
      <unit>arcsec/pix</unit>
      <datatype>DECIMAL(8,6)</datatype>
    </column>

    <column name="moonrej">
      <description>number of frames rejected due to moon-glow</description>
      <datatype>INTEGER</datatype>
      <format_spec>6d</format_spec>
    </column>

    <column name="mooninp">
      <description>initial number of input frames with suspected moon-glow</description>
      <datatype>INTEGER</datatype>
      <format_spec>6d</format_spec>
    </column>

    <column name="medint">
      <description>median of intensity pixels</description>
      <unit>DN</unit>
      <datatype>DECIMAL(8,3)</datatype>
    </column>

    <column name="medcov">
      <description>median depth of coverage in coadd</description>
      <unit>pix</unit>
      <datatype>DECIMAL(8,3)</datatype>
    </column>

    <column name="mincov">
      <description>minimum depth of coverage in coadd</description>
      <unit>pix</unit>
      <datatype>DECIMAL(8,3)</datatype>
    </column>

    <column name="maxcov">
      <description>maximum depth of coverage in coadd</description>
      <unit>pix</unit>
      <datatype>DECIMAL(8,3)</datatype>
    </column>

    <column name="lowcovpc1">
      <description>percent area of coadd footprint with coverage depth &lt;= 4 pixels</description>
      <datatype>DECIMAL(9,6)</datatype>
    </column>

    <column name="lowcovpc2">
      <description>percent area of coadd footprint with coverage depth &lt;= 6 pixels</description>
      <datatype>DECIMAL(9,6)</datatype>
    </column>            

    <column name="nomcovpc">
      <description>percent area of coadd footprint with coverage depth &lt;= 8 pixels</description>
      <datatype>DECIMAL(9,6)</datatype>
    </column>            

    <column name="mincovpc">
      <description>percent area of coadd footprint with coverage depth TBD pixels</description>
      <datatype>DECIMAL(9,6)</datatype>
    </column>            

    <column name="robsig">
      <description>robust spatial sigma at medcov +/- 0.25</description>
      <unit>DN</unit>
      <datatype>DECIMAL(13,6)</datatype>
    </column>

    <column name="pixchis1">
      <description>ratio of robust spatial sigma / median uncertainty at medcov +/- 0.25</description>
      <datatype>DECIMAL(10,6)</datatype>
    </column>

    <column name="pixchis2">
      <description>ratio of robust spatial sigma / modal uncertainty at medcov +/- 0.25</description>
      <datatype>DECIMAL(10,6)</datatype>
    </column>

    <column name="mednmsk">
      <description>median number of pixels masked per frame</description>
      <datatype>DECIMAL(9,1)</datatype>
    </column>

    <column name="cdelt1">
      <description>deg/pix scale at crpix1,crpix2 for axis 1 (x)</description>
      <utype>fits:CDELT1</utype>
      <unit>deg/pix</unit>
      <datatype>DECIMAL(19,18)</datatype>
    </column>

    <column name="cdelt2">
      <description>deg/pix scale at crpix1,crpix2 for axis 2 (y)</description>
      <utype>fits:CDELT2</utype>
      <unit>deg/pix</unit>
      <datatype>DECIMAL(19,18)</datatype>
    </column>

    <column name="crota2">
      <description>image twist angle of +axis2 W of N</description>
      <utype>fits:CROTA2</utype>
      <unit>deg</unit>
      <datatype>DECIMAL(16,13)</datatype>
    </column>

    <column name="bitmask">
      <description>fatal bitstring mask template</description>
      <datatype>INTEGER</datatype>
    </column>

    <column name="numfrms" principal="true">
      <description>number of image frames used to create coadd</description>
      <datatype>INTEGER</datatype>
      <format_spec>5d</format_spec>
    </column>

    <column name="qa_status" principal="true">
      <description>QA status for scan: Prelim, Reviewed, or Final</description>
      <datatype>CHAR(9)</datatype>
    </column>

    <column name="qual_coadd">
      <description>quality score value for coadd</description>
      <datatype>SMALLINT</datatype>
      <format_spec>2d</format_spec>
    </column>

    <column name="qc_fact">
      <description>quality factor qc value for coadd: completion quality</description>
      <datatype>DECIMAL(2,1)</datatype>
    </column>

    <column name="qi_fact">
      <description>quality factor qi value for coadd: image quality</description>
      <datatype>DECIMAL(2,1)</datatype>
    </column>

    <column name="qa_fact">
      <description>quality factor qa value for coadd: astrometry quality</description>
      <datatype>DECIMAL(2,1)</datatype>
    </column>

    <column name="q1_fact">
      <description>quality factor TBD value for scan: TBD</description>
      <datatype>DECIMAL(2,1)</datatype>
    </column>

    <column name="q2_fact">
      <description>quality factor TBD value for scan: TBD</description>
      <datatype>DECIMAL(2,1)</datatype>
    </column>

    <column name="q3_fact">
      <description>quality factor TBD value for scan: TBD</description>
      <datatype>DECIMAL(2,1)</datatype>
    </column>

    <column name="q4_fact">
      <description>quality factor TBD value for scan: TBD</description>
      <datatype>DECIMAL(2,1)</datatype>
    </column>

    <column name="q5_fact">
      <description>quality factor TBD value for scan: TBD</description>
      <datatype>DECIMAL(2,1)</datatype>
    </column>

    <column name="date_imgprep">
      <description>date image prepared</description>
      <datatype>CHAR(20)</datatype>
    </column>

    <column name="load_id">
      <description>unique load ID number</description>
      <datatype>INTEGER</datatype>
    </column>

    <column name="cntr">
      <description>unique record ID</description>
      <ucd>meta.record</ucd>
      <datatype>BIGINT</datatype>
      <format_spec>12d</format_spec>
    </column>

    <column name="x">
      <description>unit sphere position x = cos(crval1)*cos(crval2)</description>
      <ucd>pos.cartesian.x</ucd>
      <datatype>DECIMAL(17,16)</datatype>
    </column>

    <column name="y">
      <description>unit sphere position y = sin(crval1)*cos(crval2)</description>
      <ucd>pos.cartesian.y</ucd>
      <datatype>DECIMAL(17,16)</datatype>
    </column>

    <column name="z">
      <description>unit sphere position z = sin(crval2)</description>
      <ucd>pos.cartesian.z</ucd>
      <datatype>DECIMAL(17,16)</datatype>
    </column>

    <column name="spt_ind">
      <description>Level 7 HTM index of (crval1, crval2), decimal encoding</description>
      <datatype>INTEGER</datatype>
    </column>


  </table>

  <!-- WISE AllWISE Atlas (L3a) Sources -->

  <!--  reference only -->

  <table name="p3as_psd" dbname="allwise_p3as_psd">

    <description>WISE AllWISE Atlas (L3a) Sources</description>

    <chunk_index path="/stage/irsa-wise-xpf-public/chunk_index/wise_allwise/allwise_p3as_psd/index.ci" />

    <unique refs="cntr" />
    <unique refs="source_id" />

    <reference from="coadd_id" to="wise.allwise.p3am_cdd.coadd_id" />

    <!-- for now, describe just the subset of columns necessary for search by source id -->

    <column name="source_id" principal="true">
      <description>unique source ID (coadd ID and source number)</description>
      <ucd>meta.id</ucd>
      <datatype>CHAR(28)</datatype>
    </column>
    <column name="coadd_id" principal="true">
      <description>ID of source coadd</description>
      <datatype>CHAR(20)</datatype>
    </column>
    <column name="ra" principal="true">
      <description>right ascension (J2000)</description>
      <ucd>pos.eq.ra</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(10,7)</datatype>
    </column>
    <column name="dec" principal="true">
      <description>declination (J2000)</description>
      <ucd>pos.eq.dec</ucd>
      <unit>deg</unit>
      <datatype>DECIMAL(9,7)</datatype>
    </column>
    <column name="cntr">
      <description>unique record ID</description>
      <ucd>meta.record</ucd>
      <datatype>BIGINT</datatype>
      <format_spec>15d</format_spec>
    </column>
  </table>


</schema>

</schema_group>
</catalogs>
<!-- |                                                        |
      \ ____________________________________________________ /  -->

