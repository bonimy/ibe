<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>IRSA Image Server - Cutouts</title>
	<link href="docs.css" type="text/css" rel="stylesheet" />
	<link href="prettify/prettify.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src="prettify/prettify.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js"></script>
</head>
<body>

<script>
fireflyToolbar= {
        "rootComponentsURL" : "https://irsa.ipac.caltech.edu",
        "direct" : true,
        };
</script>

<div id="irsa-banner"   style= "min-width:768px; min-height:95px;"></div>
<script type="text/javascript" language='javascript' src='https://irsa.ipac.caltech.edu/frontpage/frontpage.nocache.js'> </script>

<div class="content">

<h1><a href="index.html">IRSA Image Server</a> - Cutouts</h1>

<ul>
	<li><a href="#overview">Overview</a></li>
	<li><a href="#param">Parameters</a></li>
	<li><a href="#local">Local file names</a></li>
	<li><a href="#help">Getting Help</a></li>
</ul>

<a name="overview" />
<h3>Overview</h3>
<p>
	For files accessed via URL's starting with /ibe/data/, one can request a cutout of a FITS image (or gzipped FITS image) by simply
	appending a <a href="http://en.wikipedia.org/wiki/Query_string">query string</a>
	containing the <span class="param">center</span> and <span class="param">size</span>
	parameters to the image URL. Here are some sample FITS image URLs:
</p>
<ul>
	<li><a href="data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-int-1b.fits"><span class="root">&lt;root&gt;</span>/data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-int-1b.fits</a></li>
	<li><a href="data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-unc-1b.fits.gz"><span class="root">&lt;root&gt;</span>/data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-unc-1b.fits.gz</a></li>
</ul>
<p>And here are a few cutout URLs for these same images:</p>
<ul>
	<li><a href="data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-int-1b.fits?center=70,20&amp;size=200pix"><span class="root">&lt;root&gt;</span>/data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-int-1b.fits?center=70,20&amp;size=200pix</a></li>
	<li><a href="data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-int-1b.fits?center=300,300pix&amp;size=200pix"><span class="root">&lt;root&gt;</span>/data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-int-1b.fits?center=300,300pix&amp;size=200pix</a></li>
	<li><a href="data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-unc-1b.fits.gz?center=70,20&amp;size=2arcmin"><span class="root">&lt;root&gt;</span>/data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-unc-1b.fits.gz?center=70,20&amp;size=2arcmin</a></li>
	<li><a href="data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-unc-1b.fits.gz?center=300,300pix&amp;size=2arcmin&amp;gzip=false"><span class="root">&lt;root&gt;</span>/data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-unc-1b.fits.gz?center=300,300pix&amp;size=2arcmin&amp;gzip=false</a></li>
</ul>
<p>
	By default, cutouts are automatically gzipped. However, adding
	<span class="param">gzip=false</span> to the parameters will cause an
	uncompressed FITS image to be returned instead.
</p>
<p>
	If the requested cutout does not intersect the parent image at all, an
	HTTP 400 Bad Request will be returned. If the cutout is not completely
	contained in the parent, it is clipped. In this latter case, the
	requested cutout center will not be the center of cutout returned - in
	fact, it may not even lie inside it!
</p>

<a name="param" />
<h3>Parameters</h3>
<dl>
	<dt><span class="param">center</span>=x,y[units]</dt>
	<dd>
		<p>
			The <span class="param">center</span> parameter must consist of a
			comma separated coordinate pair followed by an optional units
			specification. If <strong>units</strong> is set to <tt>px</tt>,
			<tt>pix</tt> or <tt>pixels</tt>, then <strong>x,y</strong> are interpreted
			as the pixel space coordinates of the desired cutout center. If
			<strong>units</strong> are angular (<tt>rad</tt>, <tt>deg</tt>, etc...),
			then <strong>x,y</strong> are interpreted as the J2000 right ascension
			(<strong>x</strong>) and declination (<strong>y</strong>) of the
			desired cutout center. If no units are specified, degrees are assumed.
			Declinations outside of [-90, 90] degrees are illegal; right ascensions
			are range-reduced, so any value will do.
		</p>
		<p>Examples:</p>
		<ul>
			<li class="param">center=10,10deg</li>
			<li class="param">center=10,10</li>
			<li class="param">center=3.141,1.56rad</li>
			<li class="param">center=300.5,120px</li>
		</ul>
	</dd>
	<dt><span class="param">size</span>=x[,y][units]</dt>
	<dd>
		<p>
			The <span class="param">size</span> parameter consists of one or two
			(comma separated) values followed by an optional units specification.
			Units can be pixels (<tt>px</tt>, <tt>pix</tt>, <tt>pixels</tt>) or
			angular (<tt>arcsec</tt>, <tt>arcmin</tt>, <tt>deg</tt>, <tt>rad</tt>);
			the default is degrees. The first size value (<strong>x</strong>) is
			taken to be the full-width of the desired cutout along the first
			image axis (<tt>NAXIS1</tt>), and the second (<strong>y</strong>) is
			taken to be the full-height along the second axis (<tt>NAXIS2</tt>).
			If only one size value is specified, it is used as both the full-width
			and full-height. Negative sizes are illegal.
		</p>
		<p>Examples:</p>
		<ul>
			<li class="param">size=0.1</li>
			<li class="param">size=200px</li>
			<li class="param">size=100,200px</li>
			<li class="param">size=3arcmin</li>
			<li class="param">size=30,45arcsec</li>
		</ul>
	</dd>
	<dt><span class="param">gzip=flag</span></dt>
	<dd>
		<p>
			This parameter determines whether or not the cutout is returned in
			compressed (gzipped) form or not. If the parameter is omitted,
			then cutouts are gzipped. Compression can also be explicitly requested
			with:
		</p>
		<ul>
			<li class="param">gzip=1</li>
			<li class="param">gzip=on</li>
			<li class="param">gzip=t[rue]</li>
			<li class="param">gzip=y[es]</li>
		</ul>
		<p>To download uncompressed images, pass:</p>
		<ul>
			<li class="param">gzip=0</li>
			<li class="param">gzip=off</li>
			<li class="param">gzip=f[alse]</li>
			<li class="param">gzip=n[o]</li>
		</ul>
	</dd>
</dl>
<p>
	Parsing of unit specifications is fairly forgiving, e.g. <tt>radians</tt>,
	<tt>asec</tt>, <tt>"</tt>, <tt>arcminutes</tt> and <tt>'</tt> are all
	recognized. Malformed unit specifications and illegal sizes or coordinates
	will result in an HTTP 400 Bad Request response.
</p>

<a name="local" />
<h3>Local file names</h3>
<p>
	When downloading files or cutouts via most browsers, you will be
	prompted with a "Save As" dialog box including a suggested file name.
	This behavior is achieved by sending an HTTP
	<a href="http://www.ietf.org/rfc/rfc2183.txt">Content-Disposition</a> header
	containing the file name suggestion.
</p>
<p>However, command-line clients for web access typically ignore this header
	by default. Unless instructed otherwise,
	<a href="http://www.gnu.org/software/wget/">wget</a> will derive a local
	file name from the URL (including the query string), and
	<a href="http://curl.haxx.se/">curl</a> will write to standard out.
	To obtain shorter file names that have the proper extension (<tt>.fits.gz</tt>
	if gzipped cutouts were requested, <tt>.fits</tt> otherwise), one can
	explicitly specify a local file name:
</p>

<dl>
	<dt>wget</dt>
	<dd>
		<pre class="prettyprint lang-bsh">
wget -O file URL
wget --output-document=file URL</pre>
		<p>For example:</p>
		<pre class="prettyprint lang-bsh">
wget --output-document=mycutout.fits.gz "<span class="server">server</span><span class="root">root</span>/data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-int-1b.fits?center=70,20&amp;size=200pix"</pre>
	</dd>
	<dt>curl</dt>
	<dd>
		<pre class="prettyprint lang-bsh">
curl -o file URL
curl --output file URL
curl URL > file # uses the shell to redirect standard out to a file</pre>
	</dd>
</dl>

<p>
	One can also force both <a href="http://www.gnu.org/software/wget/">wget</a> and
	<a href="http://curl.haxx.se/">curl</a> to honor the file name
	suggestion in the <a href="http://www.ietf.org/rfc/rfc2183.txt">Content-Disposition</a>
	header:
</p>

<dl>
	<dt>wget</dt>
	<dd>
		<pre class="prettyprint lang-bsh">
wget --content-disposition URL</pre>
		<p>For example:</p>
		<pre class="prettyprint lang-bsh">
wget --content-disposition "<span class="server">server</span><span class="root">root</span>/data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-int-1b.fits?center=70,20&amp;size=200pix"</pre>
		<p>
			will download a cutout to a local file named <tt>02206a149-w1-int-1b.fits.gz</tt>.
			Note that the <tt>--content-disposition</tt> option is only available in
			<a href="http://www.gnu.org/software/wget/">wget</a> versions 1.11.x or later.
		</p>
	</dd>
	<dt>curl</dt>
	<dd>
		<p>
			Using the <tt>-J/--remote-header-name</tt> option in conjunction with
			<tt>-O/--remote-name</tt> does the trick:
		</p>
		<pre class="prettyprint lang-bsh">
curl -O -J "<span class="server">server</span><span class="root">root</span>/data/wise/allsky/4band_p1bm_frm/6a/02206a/149/02206a149-w1-int-1b.fits?center=70,20&amp;size=200pix"</pre>
	</dd>
</dl>

<a name="help" />
<h3>Getting Help</h3>
<p>
	If you've run into a problem, think you've found a bug, or simply have questions, please contact
	<a href="https://irsasupport.ipac.caltech.edu/">IRSA User Support</a>.
</p>

</div>

<script type="text/javascript"><!--
	$(document).ready(function() {
		var root, i =  window.location.pathname.lastIndexOf("/");
		if (i < 0) {
			root = "";
		} else {
			root = window.location.pathname.substring(0, i);
		}
		var server = window.location.protocol + '//' + window.location.host;
		$('span.server').text(server);
		$('span.root').text(root);
	});
	$(document).ready(prettyPrint);
--></script>

<div id="irsa-footer" style="position:absolute;left:0;right:0;margin-top:20px">
<iframe src="https://irsa.ipac.caltech.edu/frontpage/footer.html" width="100%" frameborder=0 scrolling=0 seamless=1/>
</div>  <!-- end #irsa-footer -->



</body>
</html>
